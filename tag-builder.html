<div id="result">

</div>

<script>
var tag = {
    type: 'section',
    id: 'myId',
    classes: ['my-class1', 'my-class2'],
    data: {
        media: 'val1',
        lightbox: 'val2'
    },
    attributes: {
        'aria-label': 'val3',
        'myattribute': 'val4'
    },
    content: 'This is my section',
    events: {
        click: function(){
            console.log('this is click event');
        },
        mouseover: function(){
            console.log('this is mouseover event');
        },
    },
    children: [
        {
            type: 'button',
            classes: ['my-class3'],
            data: {},
            attributes: {},
            content: 'Click me',
            children: []
        },
        {
            type: 'a',
            classes: [],
            data: {},
            attributes: {
                href: 'link....'
            },
            content: 'Click this link',
            children: []
        }
    ]
};


var TagBuilder = function(t){
    var tag = document.createElement(t.type);

    if(t.id !== undefined && t.id !== null){
        tag.id = t.id;
    }

    for (var c of t.classes) {
        tag.classList.add(c);
    }
    for (var d in t.data) {
        tag.setAttribute('data-'+d, t.data[d]);
    }
    for (var a in t.attributes) {
        tag.setAttribute(a, t.attributes[a]);
    }
    var content = document.createTextNode(t.content);

    for (var e in t.events) {
        var p = t.events[e];
        tag.addEventListener(e, p);
    }

    tag.appendChild(content);
    if(t.children.length == 0){
        return tag;
    } else {
        for (var child of t.children) {
            tag.appendChild(TagBuilder(child));
        }
        return tag;
    }
}

var result = TagBuilder(tag);
console.log(result);
document.getElementById('result').appendChild(result);


</script>
